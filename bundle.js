!function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}function t(){return window.fetch("https://qpqp.dk/instagram_hashtag_images.php?hashtag="+b).then(function(e){return e.json()})}function n(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(null!==a){var c=document.createElement("img");c.src=a.display_src,c.className=v("image"),t.push(c)}}}catch(e){i=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}return t}function i(e){console.log("Loading instagram images into slideshow",e);var t=document.getElementById("images");t.innerHTML="";for(var n=0;n<e.length;n++){var i=e[n];null!==i&&(i.className="image",t.appendChild(i))}}function r(){function e(){if(w>=k.length-1)w=0,t().then(function(e){i(k=n(e));for(var t=0;t<k.length;t++)k[t].className=v("image",{shown:t===w})});else{w++;for(var e=0;e<k.length;e++)k[e].className=v("image",{shown:e===w})}}console.log("Starting slideshow"),window.clearInterval(S),S=window.setInterval(e,m),e()}function o(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function s(){this.bufferBuilder=new T}function a(e){var t=e.charCodeAt(0);return t<=2047?"00":t<=65535?"000":t<=2097151?"0000":t<=67108863?"00000":"000000"}function c(e){return e.length>600?new Blob([e]).size:e.replace(/[^\u0000-\u007F]/g,a).length}function u(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function p(){}function h(e,t,n,i,r){if(!(this instanceof h))return new h(e,t,n,i,r);L.call(this),this.disconnected=!1,this._queue=[];var o=e?"https://":"http://",s=e?"wss://":"ws://";this._httpUrl=o+t+":"+n+i+r,this._wsUrl=s+t+":"+n+i+"peerjs?key="+r}function l(e,t,n){if(!(this instanceof l))return new l(e,t,n);L.call(this),this.options=R.extend({},n),this.open=!1,this.type="media",this.peer=e,this.provider=t,this.metadata=this.options.metadata,this.localStream=this.options._stream,this.id=this.options.connectionId||l._idPrefix+R.randomToken(),this.localStream&&j.startConnection(this,{_stream:this.localStream,originator:!0})}function d(e,t){if(!(this instanceof d))return new d(e);this._dc=e,H.debug=t,this._outgoing={},this._incoming={},this._received={},this._window=1e3,this._mtu=500,this._interval=0,this._count=0,this._queue=[],this._setupDC()}function f(e,t,n){if(!(this instanceof f))return new f(e,t,n);L.call(this),this.options=R.extend({serialization:"binary",reliable:!1},n),this.open=!1,this.type="data",this.peer=e,this.provider=t,this.id=this.options.connectionId||f._idPrefix+R.randomToken(),this.label=this.options.label||this.id,this.metadata=this.options.metadata,this.serialization=this.options.serialization,this.reliable=this.options.reliable,this._buffer=[],this._buffering=!1,this.bufferSize=0,this._chunkedData={},this.options._payload&&(this._peerBrowser=this.options._payload.browser),j.startConnection(this,this.options._payload||{originator:!0})}function _(e,t){if(!(this instanceof _))return new _(e,t);L.call(this),e&&e.constructor==Object?(t=e,e=void 0):e&&(e=e.toString()),t=R.extend({debug:0,host:R.CLOUD_HOST,port:R.CLOUD_PORT,key:"peerjs",path:"/",token:R.randomToken(),config:R.defaultConfig},t),this.options=t,"/"===t.host&&(t.host=window.location.hostname),"/"!==t.path[0]&&(t.path="/"+t.path),"/"!==t.path[t.path.length-1]&&(t.path+="/"),void 0===t.secure&&t.host!==R.CLOUD_HOST&&(t.secure=R.isSecure()),t.logFunction&&R.setLogFunction(t.logFunction),R.setLogLevel(t.debug),R.supports.audioVideo||R.supports.data?R.validateId(e)?R.validateKey(t.key)?t.secure&&"0.peerjs.com"===t.host?this._delayedAbort("ssl-unavailable","The cloud server currently does not support HTTPS. Please run your own PeerServer to use HTTPS."):(this.destroyed=!1,this.disconnected=!1,this.open=!1,this.connections={},this._lostMessages={},this._initializeServerConnection(),e?this._initialize(e):this._retrieveId()):this._delayedAbort("invalid-key",'API KEY "'+t.key+'" is invalid'):this._delayedAbort("invalid-id",'ID "'+e+'" is invalid'):this._delayedAbort("browser-incompatible","The current browser does not support WebRTC")}function y(){X=setInterval(function(){V.on("call",function(e){console.log("call started"),e.answer(null),e.on("stream",function(e){clearInterval(X),console.log("got stream"),document.getElementById("livefeed").srcObject=e})})},1e4)}var g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},v=e(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){function n(){for(var e=[],r=0;r<arguments.length;r++){var o=arguments[r];if(o){var s=void 0===o?"undefined":t(o);if("string"===s||"number"===s)e.push(o);else if(Array.isArray(o))e.push(n.apply(null,o));else if("object"===s)for(var a in o)i.call(o,a)&&o[a]&&e.push(a)}}return e.join(" ")}var i={}.hasOwnProperty;e.exports?e.exports=n:window.classNames=n}()}),b="sitcomp17",m=1e4,k=[],w=0,S=null;document.getElementById("images")&&t().then(function(e){i(k=n(e)),r()});var B=e(function(e){function t(){this._pieces=[],this._parts=[]}var n={};n.useBlobBuilder=function(){try{return new Blob([]),!1}catch(e){return!0}}(),n.useArrayBufferView=!n.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(e){return!0}}(),e.exports.binaryFeatures=n;var i=e.exports.BlobBuilder;"undefined"!=typeof window&&(i=e.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),t.prototype.append=function(e){"number"==typeof e?this._pieces.push(e):(this.flush(),this._parts.push(e))},t.prototype.flush=function(){if(this._pieces.length>0){var e=new Uint8Array(this._pieces);n.useArrayBufferView||(e=e.buffer),this._parts.push(e),this._pieces=[]}},t.prototype.getBuffer=function(){if(this.flush(),n.useBlobBuilder){for(var e=new i,t=0,r=this._parts.length;t<r;t++)e.append(this._parts[t]);return e.getBlob()}return new Blob(this._parts)},e.exports.BufferBuilder=t}),C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T=B.BufferBuilder,E=B.binaryFeatures,A={unpack:function(e){return new o(e).unpack()},pack:function(e){var t=new s;return t.pack(e),t.getBuffer()}};o.prototype.unpack=function(){var e=this.unpack_uint8();if(e<128)return e;if((224^e)<32)return(224^e)-32;var t;if((t=160^e)<=15)return this.unpack_raw(t);if((t=176^e)<=15)return this.unpack_string(t);if((t=144^e)<=15)return this.unpack_array(t);if((t=128^e)<=15)return this.unpack_map(t);switch(e){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:case 213:case 214:case 215:return;case 216:return t=this.unpack_uint16(),this.unpack_string(t);case 217:return t=this.unpack_uint32(),this.unpack_string(t);case 218:return t=this.unpack_uint16(),this.unpack_raw(t);case 219:return t=this.unpack_uint32(),this.unpack_raw(t);case 220:return t=this.unpack_uint16(),this.unpack_array(t);case 221:return t=this.unpack_uint32(),this.unpack_array(t);case 222:return t=this.unpack_uint16(),this.unpack_map(t);case 223:return t=this.unpack_uint32(),this.unpack_map(t)}},o.prototype.unpack_uint8=function(){var e=255&this.dataView[this.index];return this.index++,e},o.prototype.unpack_uint16=function(){var e=this.read(2),t=256*(255&e[0])+(255&e[1]);return this.index+=2,t},o.prototype.unpack_uint32=function(){var e=this.read(4),t=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,t},o.prototype.unpack_uint64=function(){var e=this.read(8),t=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,t},o.prototype.unpack_int8=function(){var e=this.unpack_uint8();return e<128?e:e-256},o.prototype.unpack_int16=function(){var e=this.unpack_uint16();return e<32768?e:e-65536},o.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)},o.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)},o.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t},o.prototype.unpack_string=function(e){for(var t,n,i=this.read(e),r=0,o="";r<e;)(t=i[r])<128?(o+=String.fromCharCode(t),r++):(192^t)<32?(n=(192^t)<<6|63&i[r+1],o+=String.fromCharCode(n),r+=2):(n=(15&t)<<12|(63&i[r+1])<<6|63&i[r+2],o+=String.fromCharCode(n),r+=3);return this.index+=e,o},o.prototype.unpack_array=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=this.unpack();return t},o.prototype.unpack_map=function(e){for(var t={},n=0;n<e;n++){var i=this.unpack(),r=this.unpack();t[i]=r}return t},o.prototype.unpack_float=function(){var e=this.unpack_uint32(),t=(e>>23&255)-127,n=8388607&e|8388608;return(0==e>>31?1:-1)*n*Math.pow(2,t-23)},o.prototype.unpack_double=function(){var e=this.unpack_uint32(),t=this.unpack_uint32(),n=e>>31,i=(e>>20&2047)-1023,r=(1048575&e|1048576)*Math.pow(2,i-20)+t*Math.pow(2,i-52);return(0==n?1:-1)*r},o.prototype.read=function(e){var t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")},s.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},s.prototype.pack=function(e){var t=void 0===e?"undefined":C(e);if("string"==t)this.pack_string(e);else if("number"==t)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"==t)!0===e?this.bufferBuilder.append(195):!1===e&&this.bufferBuilder.append(194);else if("undefined"==t)this.bufferBuilder.append(192);else{if("object"!=t)throw new Error('Type "'+t+'" not yet supported');if(null===e)this.bufferBuilder.append(192);else{var n=e.constructor;if(n==Array)this.pack_array(e);else if(n==Blob||n==File)this.pack_bin(e);else if(n==ArrayBuffer)E.useArrayBufferView?this.pack_bin(new Uint8Array(e)):this.pack_bin(e);else if("BYTES_PER_ELEMENT"in e)E.useArrayBufferView?this.pack_bin(new Uint8Array(e.buffer)):this.pack_bin(e.buffer);else if(n==Object)this.pack_object(e);else if(n==Date)this.pack_string(e.toString());else{if("function"!=typeof e.toBinaryPack)throw new Error('Type "'+n.toString()+'" not yet supported');this.bufferBuilder.append(e.toBinaryPack())}}}this.bufferBuilder.flush()},s.prototype.pack_bin=function(e){var t=e.length||e.byteLength||e.size;if(t<=15)this.pack_uint8(160+t);else if(t<=65535)this.bufferBuilder.append(218),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(t)}this.bufferBuilder.append(e)},s.prototype.pack_string=function(e){var t=c(e);if(t<=15)this.pack_uint8(176+t);else if(t<=65535)this.bufferBuilder.append(216),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(t)}this.bufferBuilder.append(e)},s.prototype.pack_array=function(e){var t=e.length;if(t<=15)this.pack_uint8(144+t);else if(t<=65535)this.bufferBuilder.append(220),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(t)}for(var n=0;n<t;n++)this.pack(e[n])},s.prototype.pack_integer=function(e){if(-32<=e&&e<=127)this.bufferBuilder.append(255&e);else if(0<=e&&e<=255)this.bufferBuilder.append(204),this.pack_uint8(e);else if(-128<=e&&e<=127)this.bufferBuilder.append(208),this.pack_int8(e);else if(0<=e&&e<=65535)this.bufferBuilder.append(205),this.pack_uint16(e);else if(-32768<=e&&e<=32767)this.bufferBuilder.append(209),this.pack_int16(e);else if(0<=e&&e<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(e);else if(-2147483648<=e&&e<=2147483647)this.bufferBuilder.append(210),this.pack_int32(e);else if(-0x8000000000000000<=e&&e<=0x8000000000000000)this.bufferBuilder.append(211),this.pack_int64(e);else{if(!(0<=e&&e<=0x10000000000000000))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(e)}},s.prototype.pack_double=function(e){var t=0;e<0&&(t=1,e=-e);var n=Math.floor(Math.log(e)/Math.LN2),i=e/Math.pow(2,n)-1,r=Math.floor(i*Math.pow(2,52)),o=Math.pow(2,32),s=t<<31|n+1023<<20|r/o&1048575,a=r%o;this.bufferBuilder.append(203),this.pack_int32(s),this.pack_int32(a)},s.prototype.pack_object=function(e){var t=Object.keys(e).length;if(t<=15)this.pack_uint8(128+t);else if(t<=65535)this.bufferBuilder.append(222),this.pack_uint16(t);else{if(!(t<=4294967295))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(t)}for(var n in e)e.hasOwnProperty(n)&&(this.pack(n),this.pack(e[n]))},s.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)},s.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(255&e)},s.prototype.pack_uint32=function(e){var t=4294967295&e;this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},s.prototype.pack_uint64=function(e){var t=e/Math.pow(2,32),n=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n)},s.prototype.pack_int8=function(e){this.bufferBuilder.append(255&e)},s.prototype.pack_int16=function(e){this.bufferBuilder.append((65280&e)>>8),this.bufferBuilder.append(255&e)},s.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},s.prototype.pack_int64=function(e){var t=Math.floor(e/Math.pow(2,32)),n=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n)};var I={RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription,RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate},x={iceServers:[{url:"stun:stun.l.google.com:19302"}]},P=1,M=I.RTCPeerConnection,D={noop:function(){},CLOUD_HOST:"0.peerjs.com",CLOUD_PORT:9e3,chunkedBrowsers:{Chrome:1},chunkedMTU:16300,logLevel:0,setLogLevel:function(e){var t=parseInt(e,10);isNaN(parseInt(e,10))?D.logLevel=e?3:0:D.logLevel=t,D.log=D.warn=D.error=D.noop,D.logLevel>0&&(D.error=D._printWith("ERROR")),D.logLevel>1&&(D.warn=D._printWith("WARNING")),D.logLevel>2&&(D.log=D._print)},setLogFunction:function(e){e.constructor!==Function?D.warn("The log function you passed in is not a function. Defaulting to regular logs."):D._print=e},_printWith:function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e),D._print.apply(D,t)}},_print:function(){var e=!1,t=Array.prototype.slice.call(arguments);t.unshift("PeerJS: ");for(var n=0,i=t.length;n<i;n++)t[n]instanceof Error&&(t[n]="("+t[n].name+") "+t[n].message,e=!0);e?console.error.apply(console,t):console.log.apply(console,t)},defaultConfig:x,browser:window.mozRTCPeerConnection?"Firefox":window.webkitRTCPeerConnection?"Chrome":window.RTCPeerConnection?"Supported":"Unsupported",supports:function(){if(void 0===M)return{};var e,t,n=!0,i=!0,r=!1,o=!1,s=!!window.webkitRTCPeerConnection;try{e=new M(x,{optional:[{RtpDataChannels:!0}]})}catch(e){n=!1,i=!1}if(n)try{t=e.createDataChannel("_PEERJSTEST")}catch(e){n=!1}if(n){try{t.binaryType="blob",r=!0}catch(e){}var a=new M(x,{});try{o=a.createDataChannel("_PEERJSRELIABLETEST",{}).reliable}catch(e){}a.close()}if(i&&(i=!!e.addStream),!s&&n){var c=new M(x,{optional:[{RtpDataChannels:!0}]});c.onnegotiationneeded=function(){s=!0,D&&D.supports&&(D.supports.onnegotiationneeded=!0)},c.createDataChannel("_PEERJSNEGOTIATIONTEST"),setTimeout(function(){c.close()},1e3)}return e&&e.close(),{audioVideo:i,data:n,binaryBlob:r,binary:o,reliable:o,sctp:o,onnegotiationneeded:s}}(),validateId:function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.exec(e)},validateKey:function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.exec(e)},debug:!1,inherits:function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},pack:A.pack,unpack:A.unpack,log:function(){if(D.debug){var e=!1,t=Array.prototype.slice.call(arguments);t.unshift("PeerJS: ");for(var n=0,i=t.length;n<i;n++)t[n]instanceof Error&&(t[n]="("+t[n].name+") "+t[n].message,e=!0);e?console.error.apply(console,t):console.log.apply(console,t)}},setZeroTimeout:function(e){function t(t){t.source==e&&t.data==i&&(t.stopPropagation&&t.stopPropagation(),n.length&&n.shift()())}var n=[],i="zero-timeout-message";return e.addEventListener?e.addEventListener("message",t,!0):e.attachEvent&&e.attachEvent("onmessage",t),function(t){n.push(t),e.postMessage(i,"*")}}(window),chunk:function(e){for(var t=[],n=e.size,i=index=0,r=Math.ceil(n/D.chunkedMTU);i<n;){var o=Math.min(n,i+D.chunkedMTU),s=e.slice(i,o),a={__peerData:P,n:index,data:s,total:r};t.push(a),i=o,index+=1}return P+=1,t},blobToArrayBuffer:function(e,t){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsArrayBuffer(e)},blobToBinaryString:function(e,t){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsBinaryString(e)},binaryStringToArrayBuffer:function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer},randomToken:function(){return Math.random().toString(36).substr(2)},isSecure:function(){return"https:"===location.protocol}},R=D;p.prototype._events=void 0,p.prototype.listeners=function(e){if(!this._events||!this._events[e])return[];if(this._events[e].fn)return[this._events[e].fn];for(var t=0,n=this._events[e].length,i=new Array(n);t<n;t++)i[t]=this._events[e][t].fn;return i},p.prototype.emit=function(e,t,n,i,r,o){if(!this._events||!this._events[e])return!1;var s,a,c=this._events[e],u=arguments.length;if("function"==typeof c.fn){switch(c.once&&this.removeListener(e,c.fn,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,i),!0;case 5:return c.fn.call(c.context,t,n,i,r),!0;case 6:return c.fn.call(c.context,t,n,i,r,o),!0}for(a=1,s=new Array(u-1);a<u;a++)s[a-1]=arguments[a];c.fn.apply(c.context,s)}else{var p,h=c.length;for(a=0;a<h;a++)switch(c[a].once&&this.removeListener(e,c[a].fn,!0),u){case 1:c[a].fn.call(c[a].context);break;case 2:c[a].fn.call(c[a].context,t);break;case 3:c[a].fn.call(c[a].context,t,n);break;default:if(!s)for(p=1,s=new Array(u-1);p<u;p++)s[p-1]=arguments[p];c[a].fn.apply(c[a].context,s)}}return!0},p.prototype.on=function(e,t,n){var i=new u(t,n||this);return this._events||(this._events={}),this._events[e]?this._events[e].fn?this._events[e]=[this._events[e],i]:this._events[e].push(i):this._events[e]=i,this},p.prototype.once=function(e,t,n){var i=new u(t,n||this,!0);return this._events||(this._events={}),this._events[e]?this._events[e].fn?this._events[e]=[this._events[e],i]:this._events[e].push(i):this._events[e]=i,this},p.prototype.removeListener=function(e,t,n){if(!this._events||!this._events[e])return this;var i=this._events[e],r=[];if(t&&(i.fn&&(i.fn!==t||n&&!i.once)&&r.push(i),!i.fn))for(var o=0,s=i.length;o<s;o++)(i[o].fn!==t||n&&!i[o].once)&&r.push(i[o]);return r.length?this._events[e]=1===r.length?r[0]:r:delete this._events[e],this},p.prototype.removeAllListeners=function(e){return this._events?(e?delete this._events[e]:this._events={},this):this},p.prototype.off=p.prototype.removeListener,p.prototype.addListener=p.prototype.on,p.prototype.setMaxListeners=function(){return this},p.EventEmitter=p,p.EventEmitter2=p,p.EventEmitter3=p;var L=p;R.inherits(h,L),h.prototype.start=function(e,t){this.id=e,this._httpUrl+="/"+e+"/"+t,this._wsUrl+="&id="+e+"&token="+t,this._startXhrStream(),this._startWebSocket()},h.prototype._startWebSocket=function(e){var t=this;this._socket||(this._socket=new WebSocket(this._wsUrl),this._socket.onmessage=function(e){try{var n=JSON.parse(e.data)}catch(t){return void R.log("Invalid server message",e.data)}t.emit("message",n)},this._socket.onclose=function(e){R.log("Socket closed."),t.disconnected=!0,t.emit("disconnected")},this._socket.onopen=function(){t._timeout&&(clearTimeout(t._timeout),setTimeout(function(){t._http.abort(),t._http=null},5e3)),t._sendQueuedMessages(),R.log("Socket open")})},h.prototype._startXhrStream=function(e){try{var t=this;this._http=new XMLHttpRequest,this._http._index=1,this._http._streamIndex=e||0,this._http.open("post",this._httpUrl+"/id?i="+this._http._streamIndex,!0),this._http.onerror=function(){clearTimeout(t._timeout),t.emit("disconnected")},this._http.onreadystatechange=function(){2==this.readyState&&this.old?(this.old.abort(),delete this.old):this.readyState>2&&200===this.status&&this.responseText&&t._handleStream(this)},this._http.send(null),this._setHTTPTimeout()}catch(e){R.log("XMLHttpRequest not available; defaulting to WebSockets")}},h.prototype._handleStream=function(e){var t=e.responseText.split("\n");if(e._buffer)for(;e._buffer.length>0;){var n=e._buffer.shift(),i=t[n];try{i=JSON.parse(i)}catch(t){e._buffer.shift(n);break}this.emit("message",i)}var r=t[e._index];if(r)if(e._index+=1,e._index===t.length)e._buffer||(e._buffer=[]),e._buffer.push(e._index-1);else{try{r=JSON.parse(r)}catch(e){return void R.log("Invalid server message",r)}this.emit("message",r)}},h.prototype._setHTTPTimeout=function(){var e=this;this._timeout=setTimeout(function(){var t=e._http;e._wsOpen()?t.abort():(e._startXhrStream(t._streamIndex+1),e._http.old=t)},25e3)},h.prototype._wsOpen=function(){return this._socket&&1==this._socket.readyState},h.prototype._sendQueuedMessages=function(){for(var e=0,t=this._queue.length;e<t;e+=1)this.send(this._queue[e])},h.prototype.send=function(e){if(!this.disconnected)if(this.id)if(e.type){var t=JSON.stringify(e);if(this._wsOpen())this._socket.send(t);else{var n=new XMLHttpRequest,i=this._httpUrl+"/"+e.type.toLowerCase();n.open("post",i,!0),n.setRequestHeader("Content-Type","application/json"),n.send(t)}}else this.emit("error","Invalid message");else this._queue.push(e)},h.prototype.close=function(){!this.disconnected&&this._wsOpen()&&(this._socket.close(),this.disconnected=!0)};var O=h,z=I.RTCPeerConnection,N=I.RTCSessionDescription,U=I.RTCIceCandidate,F={pcs:{data:{},media:{}},queue:[]};F._idPrefix="pc_",F.startConnection=function(e,t){var n=F._getPeerConnection(e,t);if("media"===e.type&&t._stream&&n.addStream(t._stream),e.pc=e.peerConnection=n,t.originator){if("data"===e.type){var i={};R.supports.sctp||(i={reliable:t.reliable});var r=n.createDataChannel(e.label,i);e.initialize(r)}R.supports.onnegotiationneeded||F._makeOffer(e)}else F.handleSDP("OFFER",e,t.sdp)},F._getPeerConnection=function(e,t){F.pcs[e.type]||R.error(e.type+" is not a valid connection type. Maybe you overrode the `type` property somewhere."),F.pcs[e.type][e.peer]||(F.pcs[e.type][e.peer]={});var n;return t.pc&&(n=F.pcs[e.type][e.peer][t.pc]),n&&"stable"===n.signalingState||(n=F._startPeerConnection(e)),n},F._startPeerConnection=function(e){R.log("Creating RTCPeerConnection.");var t=F._idPrefix+R.randomToken(),n={};"data"!==e.type||R.supports.sctp?"media"===e.type&&(n={optional:[{DtlsSrtpKeyAgreement:!0}]}):n={optional:[{RtpDataChannels:!0}]};var i=new z(e.provider.options.config,n);return F.pcs[e.type][e.peer][t]=i,F._setupListeners(e,i,t),i},F._setupListeners=function(e,t,n){var i=e.peer,r=e.id,o=e.provider;R.log("Listening for ICE candidates."),t.onicecandidate=function(t){t.candidate&&(R.log("Received ICE candidates for:",e.peer),o.socket.send({type:"CANDIDATE",payload:{candidate:t.candidate,type:e.type,connectionId:e.id},dst:i}))},t.oniceconnectionstatechange=function(){switch(t.iceConnectionState){case"disconnected":case"failed":R.log("iceConnectionState is disconnected, closing connections to "+i),e.close();break;case"completed":t.onicecandidate=R.noop}},t.onicechange=t.oniceconnectionstatechange,R.log("Listening for `negotiationneeded`"),t.onnegotiationneeded=function(){R.log("`negotiationneeded` triggered"),"stable"==t.signalingState?F._makeOffer(e):R.log("onnegotiationneeded triggered when not stable. Is another connection being established?")},R.log("Listening for data channel"),t.ondatachannel=function(e){R.log("Received data channel");var t=e.channel;o.getConnection(i,r).initialize(t)},R.log("Listening for remote stream"),t.onaddstream=function(e){R.log("Received remote stream");var t=e.stream,n=o.getConnection(i,r);"media"===n.type&&n.addStream(t)}},F.cleanup=function(e){R.log("Cleaning up PeerConnection to "+e.peer);var t=e.pc;!t||"closed"===t.readyState&&"closed"===t.signalingState||(t.close(),e.pc=null)},F._makeOffer=function(e){var t=e.pc;t.createOffer(function(n){R.log("Created offer."),!R.supports.sctp&&"data"===e.type&&e.reliable&&(n.sdp=Reliable.higherBandwidthSDP(n.sdp)),t.setLocalDescription(n,function(){R.log("Set localDescription: offer","for:",e.peer),e.provider.socket.send({type:"OFFER",payload:{sdp:n,type:e.type,label:e.label,connectionId:e.id,reliable:e.reliable,serialization:e.serialization,metadata:e.metadata,browser:R.browser},dst:e.peer})},function(t){e.provider.emitError("webrtc",t),R.log("Failed to setLocalDescription, ",t)})},function(t){e.provider.emitError("webrtc",t),R.log("Failed to createOffer, ",t)},e.options.constraints)},F._makeAnswer=function(e){var t=e.pc;t.createAnswer(function(n){R.log("Created answer."),!R.supports.sctp&&"data"===e.type&&e.reliable&&(n.sdp=Reliable.higherBandwidthSDP(n.sdp)),t.setLocalDescription(n,function(){R.log("Set localDescription: answer","for:",e.peer),e.provider.socket.send({type:"ANSWER",payload:{sdp:n,type:e.type,connectionId:e.id,browser:R.browser},dst:e.peer})},function(t){e.provider.emitError("webrtc",t),R.log("Failed to setLocalDescription, ",t)})},function(t){e.provider.emitError("webrtc",t),R.log("Failed to create answer, ",t)})},F.handleSDP=function(e,t,n){n=new N(n);var i=t.pc;R.log("Setting remote description",n),i.setRemoteDescription(n,function(){R.log("Set remoteDescription:",e,"for:",t.peer),"OFFER"===e&&F._makeAnswer(t)},function(e){t.provider.emitError("webrtc",e),R.log("Failed to setRemoteDescription, ",e)})},F.handleCandidate=function(e,t){var n=t.candidate,i=t.sdpMLineIndex;e.pc.addIceCandidate(new U({sdpMLineIndex:i,candidate:n})),R.log("Added ICE candidate for:",e.peer)};var j=F;R.inherits(l,L),l._idPrefix="mc_",l.prototype.addStream=function(e){R.log("Receiving stream",e),this.remoteStream=e,this.emit("stream",e)},l.prototype.handleMessage=function(e){var t=e.payload;switch(e.type){case"ANSWER":j.handleSDP(e.type,this,t.sdp),this.open=!0;break;case"CANDIDATE":j.handleCandidate(this,t.candidate);break;default:R.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}},l.prototype.answer=function(e){if(this.localStream)R.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");else{this.options._payload._stream=e,this.localStream=e,j.startConnection(this,this.options._payload);for(var t=this.provider._getMessages(this.id),n=0,i=t.length;n<i;n+=1)this.handleMessage(t[n]);this.open=!0}},l.prototype.close=function(){this.open&&(this.open=!1,j.cleanup(this),this.emit("close"))};var q=l,W={debug:!1,inherits:function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},extend:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},pack:A.pack,unpack:A.unpack,log:function(){if(W.debug){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.unshift("Reliable: "),console.log.apply(console,e)}},setZeroTimeout:function(e){function t(t){t.source==e&&t.data==i&&(t.stopPropagation&&t.stopPropagation(),n.length&&n.shift()())}var n=[],i="zero-timeout-message";return e.addEventListener?e.addEventListener("message",t,!0):e.attachEvent&&e.attachEvent("onmessage",t),function(t){n.push(t),e.postMessage(i,"*")}}(g),blobToArrayBuffer:function(e,t){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsArrayBuffer(e)},blobToBinaryString:function(e,t){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsBinaryString(e)},binaryStringToArrayBuffer:function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer},randomToken:function(){return Math.random().toString(36).substr(2)}},H=W;d.prototype.send=function(e){var t=H.pack(e);t.size<this._mtu?this._handleSend(["no",t]):(this._outgoing[this._count]={ack:0,chunks:this._chunk(t)},H.debug&&(this._outgoing[this._count].timer=new Date),this._sendWindowedChunks(this._count),this._count+=1)},d.prototype._setupInterval=function(){var e=this;this._timeout=setInterval(function(){var t=e._queue.shift();if(t._multiple)for(var n=0,i=t.length;n<i;n+=1)e._intervalSend(t[n]);else e._intervalSend(t)},this._interval)},d.prototype._intervalSend=function(e){var t=this;e=H.pack(e),H.blobToBinaryString(e,function(e){t._dc.send(e)}),0===t._queue.length&&(clearTimeout(t._timeout),t._timeout=null)},d.prototype._processAcks=function(){for(var e in this._outgoing)this._outgoing.hasOwnProperty(e)&&this._sendWindowedChunks(e)},d.prototype._handleSend=function(e){for(var t=!0,n=0,i=this._queue.length;n<i;n+=1){var r=this._queue[n];r===e?t=!1:r._multiple&&-1!==r.indexOf(e)&&(t=!1)}t&&(this._queue.push(e),this._timeout||this._setupInterval())},d.prototype._setupDC=function(){var e=this;this._dc.onmessage=function(t){var n=t.data;if(n.constructor===String){var i=H.binaryStringToArrayBuffer(n);n=H.unpack(i),e._handleMessage(n)}}},d.prototype._handleMessage=function(e){var t,n=e[1],i=this._incoming[n],r=this._outgoing[n];switch(e[0]){case"no":var o=n;o&&this.onmessage(H.unpack(o));break;case"end":if(t=i,this._received[n]=e[2],!t)break;this._ack(n);break;case"ack":if(t=r){var s=e[2];t.ack=Math.max(s,t.ack),t.ack>=t.chunks.length?(H.log("Time: ",new Date-t.timer),delete this._outgoing[n]):this._processAcks()}break;case"chunk":if(!(t=i)){if(!0===this._received[n])break;t={ack:["ack",n,0],chunks:[]},this._incoming[n]=t}var a=e[2],c=e[3];t.chunks[a]=new Uint8Array(c),a===t.ack[2]&&this._calculateNextAck(n),this._ack(n);break;default:this._handleSend(e)}},d.prototype._chunk=function(e){for(var t=[],n=e.size,i=0;i<n;){var r=Math.min(n,i+this._mtu),o={payload:e.slice(i,r)};t.push(o),i=r}return H.log("Created",t.length,"chunks."),t},d.prototype._ack=function(e){var t=this._incoming[e].ack;this._received[e]===t[2]&&(this._complete(e),this._received[e]=!0),this._handleSend(t)},d.prototype._calculateNextAck=function(e){for(var t=this._incoming[e],n=t.chunks,i=0,r=n.length;i<r;i+=1)if(void 0===n[i])return void(t.ack[2]=i);t.ack[2]=n.length},d.prototype._sendWindowedChunks=function(e){H.log("sendWindowedChunks for: ",e);for(var t=this._outgoing[e],n=t.chunks,i=[],r=Math.min(t.ack+this._window,n.length),o=t.ack;o<r;o+=1)n[o].sent&&o!==t.ack||(n[o].sent=!0,i.push(["chunk",e,o,n[o].payload]));t.ack+this._window>=n.length&&i.push(["end",e,n.length]),i._multiple=!0,this._handleSend(i)},d.prototype._complete=function(e){H.log("Completed called for",e);var t=this,n=this._incoming[e].chunks,i=new Blob(n);H.blobToArrayBuffer(i,function(e){t.onmessage(H.unpack(e))}),delete this._incoming[e]},d.higherBandwidthSDP=function(e){var t=navigator.appVersion.match(/Chrome\/(.*?) /);if(t&&(t=parseInt(t[1].split(".").shift()))<31){var n=e.split("b=AS:30");if(n.length>1)return n[0]+"b=AS:102400"+n[1]}return e},d.prototype.onmessage=function(e){};var Y={Reliable:d};R.inherits(f,L),f._idPrefix="dc_",f.prototype.initialize=function(e){this._dc=this.dataChannel=e,this._configureDataChannel()},f.prototype._configureDataChannel=function(){var e=this;R.supports.sctp&&(this._dc.binaryType="arraybuffer"),this._dc.onopen=function(){R.log("Data channel connection success"),e.open=!0,e.emit("open")},!R.supports.sctp&&this.reliable&&(this._reliable=new Y(this._dc,R.debug)),this._reliable?this._reliable.onmessage=function(t){e.emit("data",t)}:this._dc.onmessage=function(t){e._handleDataMessage(t)},this._dc.onclose=function(t){R.log("DataChannel closed for:",e.peer),e.close()}},f.prototype._handleDataMessage=function(e){var t=this,n=e.data,i=n.constructor;if("binary"===this.serialization||"binary-utf8"===this.serialization){if(i===Blob)return void R.blobToArrayBuffer(n,function(e){n=R.unpack(e),t.emit("data",n)});if(i===ArrayBuffer)n=R.unpack(n);else if(i===String){var r=R.binaryStringToArrayBuffer(n);n=R.unpack(r)}}else"json"===this.serialization&&(n=JSON.parse(n));if(n.__peerData){var o=n.__peerData,s=this._chunkedData[o]||{data:[],count:0,total:n.total};return s.data[n.n]=n.data,s.count+=1,s.total===s.count&&(delete this._chunkedData[o],n=new Blob(s.data),this._handleDataMessage({data:n})),void(this._chunkedData[o]=s)}this.emit("data",n)},f.prototype.close=function(){this.open&&(this.open=!1,j.cleanup(this),this.emit("close"))},f.prototype.send=function(e,t){if(this.open)if(this._reliable)this._reliable.send(e);else{var n=this;if("json"===this.serialization)this._bufferedSend(JSON.stringify(e));else if("binary"===this.serialization||"binary-utf8"===this.serialization){var i=R.pack(e);if((R.chunkedBrowsers[this._peerBrowser]||R.chunkedBrowsers[R.browser])&&!t&&i.size>R.chunkedMTU)return void this._sendChunks(i);R.supports.sctp?R.supports.binaryBlob?this._bufferedSend(i):R.blobToArrayBuffer(i,function(e){n._bufferedSend(e)}):R.blobToBinaryString(i,function(e){n._bufferedSend(e)})}else this._bufferedSend(e)}else this.emit("error",new Error("Connection is not open. You should listen for the `open` event before sending messages."))},f.prototype._bufferedSend=function(e){!this._buffering&&this._trySend(e)||(this._buffer.push(e),this.bufferSize=this._buffer.length)},f.prototype._trySend=function(e){try{this._dc.send(e)}catch(e){this._buffering=!0;var t=this;return setTimeout(function(){t._buffering=!1,t._tryBuffer()},100),!1}return!0},f.prototype._tryBuffer=function(){if(0!==this._buffer.length){var e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this.bufferSize=this._buffer.length,this._tryBuffer())}},f.prototype._sendChunks=function(e){for(var t=R.chunk(e),n=0,i=t.length;n<i;n+=1){var e=t[n];this.send(e,!0)}},f.prototype.handleMessage=function(e){var t=e.payload;switch(e.type){case"ANSWER":this._peerBrowser=t.browser,j.handleSDP(e.type,this,t.sdp);break;case"CANDIDATE":j.handleCandidate(this,t.candidate);break;default:R.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}};var J=f;R.inherits(_,L),_.prototype._initializeServerConnection=function(){var e=this;this.socket=new O(this.options.secure,this.options.host,this.options.port,this.options.path,this.options.key),this.socket.on("message",function(t){e._handleMessage(t)}),this.socket.on("error",function(t){e._abort("socket-error",t)}),this.socket.on("disconnected",function(){e.disconnected||(e.emitError("network","Lost connection to server."),e.disconnect())}),this.socket.on("close",function(){e.disconnected||e._abort("socket-closed","Underlying socket is already closed.")})},_.prototype._retrieveId=function(e){var t=this,n=new XMLHttpRequest,i=(this.options.secure?"https://":"http://")+this.options.host+":"+this.options.port+this.options.path+this.options.key+"/id";i+="?ts="+(new Date).getTime()+Math.random(),n.open("get",i,!0),n.onerror=function(e){R.error("Error retrieving ID",e);var n="";"/"===t.options.path&&t.options.host!==R.CLOUD_HOST&&(n=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),t._abort("server-error","Could not get an ID from the server."+n)},n.onreadystatechange=function(){4===n.readyState&&(200===n.status?t._initialize(n.responseText):n.onerror())},n.send(null)},_.prototype._initialize=function(e){this.id=e,this.socket.start(this.id,this.options.token)},_.prototype._handleMessage=function(e){var t,n=e.type,i=e.payload,r=e.src;switch(n){case"OPEN":this.emit("open",this.id),this.open=!0;break;case"ERROR":this._abort("server-error",i.msg);break;case"ID-TAKEN":this._abort("unavailable-id","ID `"+this.id+"` is taken");break;case"INVALID-KEY":this._abort("invalid-key",'API KEY "'+this.options.key+'" is invalid');break;case"LEAVE":R.log("Received leave message from",r),this._cleanupPeer(r);break;case"EXPIRE":this.emitError("peer-unavailable","Could not connect to peer "+r);break;case"OFFER":var o=i.connectionId;if(t=this.getConnection(r,o))R.warn("Offer received for existing Connection ID:",o);else{if("media"===i.type)t=new q(r,this,{connectionId:o,_payload:i,metadata:i.metadata}),this._addConnection(r,t),this.emit("call",t);else{if("data"!==i.type)return void R.warn("Received malformed connection type:",i.type);t=new J(r,this,{connectionId:o,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable}),this._addConnection(r,t),this.emit("connection",t)}for(var s=this._getMessages(o),a=0,c=s.length;a<c;a+=1)t.handleMessage(s[a])}break;default:if(!i)return void R.warn("You received a malformed message from "+r+" of type "+n);var u=i.connectionId;(t=this.getConnection(r,u))&&t.pc?t.handleMessage(e):u?this._storeMessage(u,e):R.warn("You received an unrecognized message:",e)}},_.prototype._storeMessage=function(e,t){this._lostMessages[e]||(this._lostMessages[e]=[]),this._lostMessages[e].push(t)},_.prototype._getMessages=function(e){var t=this._lostMessages[e];return t?(delete this._lostMessages[e],t):[]},_.prototype.connect=function(e,t){if(this.disconnected)return R.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError("disconnected","Cannot connect to new Peer after disconnecting from server.");var n=new J(e,this,t);return this._addConnection(e,n),n},_.prototype.call=function(e,t,n){if(this.disconnected)return R.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError("disconnected","Cannot connect to new Peer after disconnecting from server.");{if(t){(n=n||{})._stream=t;var i=new q(e,this,n);return this._addConnection(e,i),i}R.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.")}},_.prototype._addConnection=function(e,t){this.connections[e]||(this.connections[e]=[]),this.connections[e].push(t)},_.prototype.getConnection=function(e,t){var n=this.connections[e];if(!n)return null;for(var i=0,r=n.length;i<r;i++)if(n[i].id===t)return n[i];return null},_.prototype._delayedAbort=function(e,t){var n=this;R.setZeroTimeout(function(){n._abort(e,t)})},_.prototype._abort=function(e,t){R.error("Aborting!"),this._lastServerId?this.disconnect():this.destroy(),this.emitError(e,t)},_.prototype.emitError=function(e,t){R.error("Error:",t),"string"==typeof t&&(t=new Error(t)),t.type=e,this.emit("error",t)},_.prototype.destroy=function(){this.destroyed||(this._cleanup(),this.disconnect(),this.destroyed=!0)},_.prototype._cleanup=function(){if(this.connections)for(var e=Object.keys(this.connections),t=0,n=e.length;t<n;t++)this._cleanupPeer(e[t]);this.emit("close")},_.prototype._cleanupPeer=function(e){for(var t=this.connections[e],n=0,i=t.length;n<i;n+=1)t[n].close()},_.prototype.disconnect=function(){var e=this;R.setZeroTimeout(function(){e.disconnected||(e.disconnected=!0,e.open=!1,e.socket&&e.socket.close(),e.emit("disconnected",e.id),e._lastServerId=e.id,e.id=null)})},_.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)R.log("Attempting reconnection to server with ID "+this._lastServerId),this.disconnected=!1,this._initializeServerConnection(),this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer "+this.id+" cannot reconnect because it is not disconnected from the server!");R.error("In a hurry? We're still trying to make the initial connection!")}},_.prototype.listAllPeers=function(e){e=e||function(){};var t=this,n=new XMLHttpRequest,i=(this.options.secure?"https://":"http://")+this.options.host+":"+this.options.port+this.options.path+this.options.key+"/peers";i+="?ts="+(new Date).getTime()+Math.random(),n.open("get",i,!0),n.onerror=function(n){t._abort("server-error","Could not get peers from the server."),e([])},n.onreadystatechange=function(){if(4===n.readyState){if(401===n.status){var i="";throw i=t.options.host!==R.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",e([]),new Error("It doesn't look like you have permission to list peers IDs. "+i)}e(200!==n.status?[]:JSON.parse(n.responseText))}},n.send(null)};var V=new _({key:"p06e3v120tz9f6r"}),X=(V.connect("sitcomp17-livefeed"),void 0);V.on("close",function(){y()}),console.log("Scripts loaded")}();
